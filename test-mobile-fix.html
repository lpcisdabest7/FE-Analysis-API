<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Fix Test - Princess Bot</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile-test.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        .debug-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 9999;
        }
        .test-button {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #333;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <div>Screen: <span id="screen-size"></span></div>
        <div>Mobile: <span id="is-mobile"></span></div>
        <div>UI Visible: <span id="ui-visible"></span></div>
        <div>Toggle Display: <span id="toggle-display"></span></div>
    </div>
    
    <button class="test-button" onclick="toggleDebug()">Toggle Debug</button>

    <div id="container">
        <!-- Mobile UI Toggle Button -->
        <button id="mobile-ui-toggle" aria-label="Toggle UI Panel">â˜°</button>
        
        <div id="ui-overlay" class="hidden">
            <div id="status">
                <h2>ğŸ¯ Princess Action Bot</h2>
                <div id="current-action">Chá» hÃ nh Ä‘á»™ng...</div>
            </div>
            
            <div id="action-history">
                <h3>ğŸ“œ Lá»‹ch sá»­ hÃ nh Ä‘á»™ng:</h3>
                <ul id="action-list">
                    <li><strong>Nháº£y mÃºa</strong><br><span class="timestamp">10:30:15</span></li>
                    <li><strong>Váº«y tay</strong><br><span class="timestamp">10:30:10</span></li>
                </ul>
            </div>
            
            <div id="text-input-section">
                <h3>ğŸ’¬ Nháº­p vÄƒn báº£n:</h3>
                <div id="text-input-group">
                    <input type="text" id="text-input" placeholder="Nháº­p lá»‡nh cho cÃ´ng chÃºa..." />
                    <button id="send-text-btn">ğŸš€ Gá»­i lá»‡nh</button>
                </div>
                <div id="text-samples">
                    <small>âœ¨ VÃ­ dá»¥ sÃ¡ng táº¡o:</small>
                    <button class="sample-text-btn" data-text="Nháº£y mÃºa">ğŸ’ƒ Nháº£y mÃºa</button>
                    <button class="sample-text-btn" data-text="Váº«y tay">ğŸ‘‹ Váº«y tay</button>
                    <button class="sample-text-btn" data-text="Bay lÃªn">ğŸ¦… Bay lÃªn</button>
                    <button class="sample-text-btn" data-text="Quay trÃ²n">ğŸŒ€ Quay trÃ²n</button>
                </div>
            </div>
            
            <div id="controls">
                <button id="connect-btn">ğŸ”Œ Káº¿t ná»‘i</button>
                <button id="test-action-btn">ğŸ­ Test Animation</button>
                <button id="settings-btn">âš™ï¸ CÃ i Ä‘áº·t</button>
                <button id="help-btn">â“ Trá»£ giÃºp</button>
            </div>
        </div>
        
        <canvas id="three-canvas"></canvas>
    </div>

    <script>
        // Simple mobile functionality test
        let isUIVisible = false;
        let isMobile = window.innerWidth <= 768;
        
        function updateDebug() {
            document.getElementById('screen-size').textContent = `${window.innerWidth} Ã— ${window.innerHeight}`;
            document.getElementById('is-mobile').textContent = isMobile;
            document.getElementById('ui-visible').textContent = isUIVisible;
            
            const toggle = document.getElementById('mobile-ui-toggle');
            if (toggle) {
                document.getElementById('toggle-display').textContent = toggle.style.display || 'default';
            }
        }
        
        function toggleMobileUI() {
            const overlay = document.getElementById('ui-overlay');
            const toggle = document.getElementById('mobile-ui-toggle');
            
            if (!isUIVisible) {
                // Show UI
                overlay.classList.remove('hidden');
                requestAnimationFrame(() => {
                    overlay.classList.add('visible');
                });
                toggle.classList.add('active');
                toggle.innerHTML = 'âœ•';
                isUIVisible = true;
                document.body.style.overflow = 'hidden';
            } else {
                // Hide UI
                overlay.classList.remove('visible');
                setTimeout(() => {
                    overlay.classList.add('hidden');
                }, 300);
                toggle.classList.remove('active');
                toggle.innerHTML = 'â˜°';
                isUIVisible = false;
                document.body.style.overflow = '';
            }
            
            updateDebug();
        }
        
        function toggleDebug() {
            const debug = document.querySelector('.debug-info');
            debug.style.display = debug.style.display === 'none' ? 'block' : 'none';
        }
        
        // Initialize
        if (isMobile) {
            document.getElementById('ui-overlay').classList.add('hidden');
            document.getElementById('mobile-ui-toggle').style.display = 'block';
        } else {
            document.getElementById('ui-overlay').classList.remove('hidden');
            document.getElementById('mobile-ui-toggle').style.display = 'none';
        }
        
        // Event listeners
        document.getElementById('mobile-ui-toggle').addEventListener('click', toggleMobileUI);
        
        // Handle resize
        window.addEventListener('resize', () => {
            const wasMobile = isMobile;
            isMobile = window.innerWidth <= 768;
            
            if (wasMobile !== isMobile) {
                if (isMobile) {
                    document.getElementById('ui-overlay').classList.add('hidden');
                    document.getElementById('mobile-ui-toggle').style.display = 'block';
                } else {
                    document.getElementById('ui-overlay').classList.remove('hidden');
                    document.getElementById('mobile-ui-toggle').style.display = 'none';
                }
            }
            
            updateDebug();
        });
        
        // Update debug info
        updateDebug();
        setInterval(updateDebug, 1000);
        
        // Test button functionality
        document.querySelectorAll('button').forEach(btn => {
            if (btn.id !== 'mobile-ui-toggle') {
                btn.addEventListener('click', function() {
                    console.log('Button clicked:', this.textContent);
                    
                    // Add visual feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // Handle specific buttons
                    switch(this.id) {
                        case 'send-text-btn':
                            const input = document.getElementById('text-input');
                            if (input.value.trim()) {
                                console.log('Sending text:', input.value);
                                input.value = '';
                                showNotification('âœ… ÄÃ£ gá»­i lá»‡nh!');
                            }
                            break;
                        case 'connect-btn':
                            showNotification('ğŸ”Œ Äang káº¿t ná»‘i...');
                            break;
                        case 'test-action-btn':
                            showNotification('ğŸ­ Test animation...');
                            break;
                        case 'settings-btn':
                            showNotification('âš™ï¸ Má»Ÿ cÃ i Ä‘áº·t...');
                            break;
                        case 'help-btn':
                            showNotification('â“ Hiá»ƒn thá»‹ trá»£ giÃºp...');
                            break;
                    }
                });
            }
        });
        
        // Sample button functionality
        document.querySelectorAll('.sample-text-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const text = this.dataset.text;
                document.getElementById('text-input').value = text;
                showNotification(`ğŸ“ ÄÃ£ chá»n: ${text}`);
            });
        });
        
        // Notification system
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                z-index: 10000;
                animation: fadeInOut 2s ease-in-out;
            `;
            
            // Add animation CSS
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes fadeInOut {
                        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                        20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                        80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }
    </script>
</body>
</html>
